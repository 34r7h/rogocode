<q ng-show="$root.debug" ng-if="!definitions"><a ng-init="wordForm.definitions = [{d:''}]">{{wordForm.definitions}}</a></q>
<h2>Word Administration</h2>
<md-input-container>
    <label>Search Words</label>
    <input type="text" ng-model="admin.search.name"/>
</md-input-container>
<md-subheader>
    <md-button class="raised" ng-show="!admin.show.add" ng-click="admin.show.add = !admin.show.add">Add Words</md-button>
    <md-button class="raised" ng-show="admin.show.add" ng-click="admin.show.add = !admin.show.add">Edit Words</md-button>
</md-subheader>
<form ng-show="admin.show.add" name="wordForm"
      ng-submit="admin.add(wordForm); wordForm = {}; wordForm.definitions = [{d:''}]">
    <h3>Add a new word below and click 'Add to Dictionary'</h3>
    <md-input-container>
        <label>Word</label>
        <input ng-model="wordForm.name" md-maxlength="50" minlength="2">
        <!--<div ng-messages="wordForm.lastName.$error" ng-show="wordForm.lastName.$dirty">
            <div ng-message="md-maxlength">That's too long!</div>
        </div>-->
    </md-input-container>
    <h4>Word Definitions</h4>

    <div ng-repeat="def in wordForm.definitions">
        <md-card>
            <md-input-container>
                <label>Enter Definition {{$index+1}}</label>
                <textarea ng-model="wordForm.definitions[$index].d" md-maxlength="1200"></textarea>
                <!--<div ng-messages="wordForm.definitions[$index].$error" ng-show="wordForm.definitions[$index].$dirty">
                    <div ng-message="md-maxlength">That's too long!</div>
                </div>-->
            </md-input-container>
            <div class="row">
                <md-button ng-if="!$first" class="fa fa-close" ng-click="wordForm.definitions.pop($index)"> Remove
                </md-button>
                <!--
                            <md-button ng-if="$last || wordForm.definitions.length===0" ng-click="wordForm.definitions.push({d:''})" class="md-raised"><i class="fa fa-plus-square" > Add Another Definition</i></md-button>
                -->
            </div>
        </md-card>
        <md-button ng-if="$last || wordForm.definitions.length===0" ng-click="wordForm.definitions.push({d:''})"
                   class="md-raised"><i class="fa fa-plus-square"> Add Another Definition</i></md-button>
    </div>
    <md-input-container>
        <md-switch md-no-ink ng-model="wordForm.published" aria-label="Publish">
            Publish
        </md-switch>
    </md-input-container>
    <button type="submit" class="md-button">Add to Dictionary</button>
</form>
<h3 ng-show="admin.search.name">Edit Words</h3>
<md-list>
    <md-card ng-repeat="word in admin.wordsArray | filter:admin.search" ng-if="admin.search" ng-if="admin.search && admin.search.name.length > 0 && (admin.search.name[0] | uppercase) === (word.name[0] | uppercase)">
        <md-list-item class="md-2-line">

            <div>
                <md-input-container>
                    <label>Word Name</label>
                    <h2><input type="text" ng-model="word.name"/></h2>
                </md-input-container>

                <div ng-repeat="def in word.definitions">
                    <md-input-container>
                        <label>Definition {{$index+1}}</label>
                        <input type="text" ng-model="def.d"/>
                    </md-input-container>
                    <a class="fa fa-close" ng-click="word.definitions.splice($index,1)">
                        Remove this definition
                    </a>
                    <a ng-if="$first || word.definitions.length===0" ng-click="word.definitions.push({d:''})" class="md-raised">
                        <i class="fa fa-plus-square"> Add Another Definition</i>
                    </a>
                </div>
                <code>Created on {{word.created}}</code>
            </div>
            <div class="row"><md-button>
                <i class="fa fa-close" ng-click="show.remove = !show.remove" ng-show="!show.remove">Remove Word</i>
                <i class="fa fa-close" ng-show="show.remove" ng-click="admin.remove(word.$id)">Really Remove Word</i>
            </md-button>
            <md-button>
                <i class="fa fa-close" ng-click="admin.save(word.$id, word)"> Save Changes</i>
            </md-button></div>
        </md-list-item>
        <md-switch ng-model="word.published">
            Publish
        </md-switch>
    </md-card>
</md-list>
<h2>About Info</h2>
<md-card>
    <md-input-container>
        <label for="about">About Info</label>
        <textarea id="about" ng-model="admin.about.$value"></textarea>
    </md-input-container>
    <md-button ng-click="admin.saveAbout(admin.about.$value)">Save About Info</md-button>
</md-card>
